<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Precision RAG: Enterprise Grade | Abraham Tesfaye | Professional Portfolio">
    <meta name="description" content="">
    <meta name="image" content="https://github.com/abrishdew.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Abraham Tesfaye | Professional Portfolio">
    <meta property="og:url" content="https://abrishdew.github.io/essays/smart-questions.html">
    <meta property="og:title" content="Precision RAG: Enterprise Grade | Abraham Tesfaye | Professional Portfolio">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://github.com/abrishdew.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/techfolio-theme/default.css">
    <link rel="stylesheet" type="text/css" href="/css/rouge/github.css">
    <!-- Load MathJax if 'mathjax: true' is found in your _config.yml. -->
    
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
    </script>
    

    <title>Precision RAG: Enterprise Grade | Abraham Tesfaye | Professional Portfolio</title>
  </head>
  <body>
  <header class="navbar navbar-expand navbar-light bg-light bg-gradient border-bottom">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">Abraham Tesfaye</a>
    <div class="ms-auto">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <a class="nav-link" href="/projects">Projects</a>
        <a class="nav-link" href="/essays">Essays</a>
        <a class="nav-link" href="/resume.html">Resume</a>
      </ul>
    </div>
  </div>
</header>

<div class="container py-4">
  <h1 class="display-4">Precision RAG: Enterprise Grade</h1>
  <span class="date">08 Jan 2024</span>
  <hr>
  <p><img width="300px" class="rounded float-start pe-4" src="../img/smart-questions/rtfm.png" /></p>

<p>Prompt Tuning For Building Enterprise Grade RAG Systems</p>
<h2 id="introduction">Introduction</h2>

<p>RAG stands for Retrieval-Augmented Generation, which is a powerful and flexible method for retrieving and generating natural language with large language models. It consists of Retrieval-based approaches that use a large collection of documents or knowledge sources to find relevant information for a given query or context, and Generative approaches that use a large neural network or language model to generate natural language from scratch or based on some input.</p>

<p>RAG combines these two approaches by using a retrieval system to select relevant documents from a knowledge source and then using a generative model to produce natural language that incorporates information from the retrieved documents.</p>

<p>I’ve had instructors address a whole class and say, “There’s no such thing as a stupid question.” I now know that is in fact not true because I’ve challenged the statement and received the appropriate dumb-stricken, annoyed look. There are definitely stupid questions, and along with that, usually unhelpful answers. Though we all might be guilty of being callous and making people victim to our poorly formed questions, there are steps we can take to ask smarter questions that hopefully don’t illicit the dreaded “rtfm” or “stfw” response.</p>

<h2 id="challenges">Challenges</h2>

<p>First of all, public LLMs, like OpenAI’s ChatGPT or Google’s Bard have been trained on publicly available data, which has two important implications. They are not able to capture information released after their training cut-off and they did not have access to non-public or company-specific data during their training. Consequently, these models are missing out on
essential and up-to-date information and context, making them a not-so-ideal solution for the automatic generation of text where company-specific information is required.</p>

<p>For the challenge, Using the Principles of RAG we are going to design a method to enhance an LLM’s information retrieval capabilities by drawing context from external documents. However, in certain use cases additional context is not enough. If a per-trained LLM struggles with summarizing financial data or drawing insights on some specifically queried data, it is hard to see how additional context in the form of a single document could help.</p>

<h2 id="general-structure">General Structure</h2>

<p>Using the method of context learning, a new data has been handed in, we will take in that input and store it in a vector database so it is embedded and ready for the next steps. The data will be chunked and converted into n-dimensions(Vectored). That will be fed to the LLM(Large Language Model) where the LLM will generate a Natural Language back to us with an answer (in this case a set of prompts or An evaluation of the prompt, depending on the user’s desire). Through our back end, we will be going through Automatic Evaluation Data Generation Service using RAGAS and Prompt Testing and Ranking Service using Monte Carlo Matchmaking and ELO Rating System.</p>

<p>So to implement this we have several steps to follow including</p>
<ol>
  <li>Define the problem and the solution.</li>
  <li>Design the architecture and the interface.</li>
  <li>Implement the code and the logic.</li>
  <li>Test and debug the application.</li>
  <li>Deploy and monitor the application.</li>
  <li>Iterate and improve the application.</li>
</ol>

<h2 id="deep-diving-into-the-rag-model">Deep diving into the RAG Model</h2>
<p>RAG models require a lot of resources and time to run, as they involve multiple components and models, such as the query encoder, the retriever, the generator, and the knowledge source. RAG models also generate a lot of data and intermediate results, such as the query vector, the retrieved documents, the token probabilities, etc. These factors can affect the speed and the memory efficiency of the RAG model, and limit its scalability and usability.</p>

<p>To optimize the RAG model for speed and memory efficiency, we need to follow some steps.
These steps are:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Choose the right RAG variant. We need to decide which RAG variant to use, depending on the task and the data. (RAG-Token and RAG-Sequence.) RAG-Token retrieves documents for each token generated by the generator, while RAG-Sequence retrieves documents for the whole input query or context. RAG-Token is more flexible and diverse,
but also more expensive and complex, as it requires more retrieval and generation steps. RAG-Sequence is more consistent and coherent, but also more rigid and limited, as it uses a fixed set of documents for the whole output generation. Therefore, in our case a RAG- Sequence seems doable and that best suits our needs and constraints with respect to our resource limitations.
Choosing the right query encoder. We need to decide which query encoder to use, depending on the input and the output.
Choosing the right retriever. We need to decide which retriever to use, depending on the knowledge source and the relevance.
</code></pre></div></div>

<ol>
  <li>
    <p>Choosing the right generator. We need to decide which generator to use,
depending on the output and the quality. In this case we have ChatGPT as a generator.</p>
  </li>
  <li>
    <p>Choosing the right knowledge source. We need to decide which knowledge source to use, depending on the domain and the freshness. In our case we have gone with the challenge document and it’s details.</p>
  </li>
  <li>
    <p>Choosing the right parameters and settings. We need to decide which parameters and settings to use, depending on the resources and the performance. The parameters and settings are the values and options that control the behavior and the output of the RAG model. The parameters and settings can include the batch size, the learning rate, the number of epochs, the beam size, the temperature, the top-k, the top-p, etc. The
parameters and settings are responsible for optimizing the speed and the memory efficiency of the RAG model, as well as the performance and the quality of the RAG model.</p>
  </li>
</ol>

<h2 id="conclusion">Conclusion</h2>

<p>This was a very interesting challenge and one that really adds to the skill sets in one’s advancement. This seems like a potential lucrative business and further practicing such innovative engineering’s will help the Tech industry a great deal.</p>

<p>Completing the whole task was the hindrance I faced due to the limitation of time. As well as getting to the roots of understanding the concepts was another drive up the hill. But nonetheless ahuge achievement was made.</p>

</div>

<footer class="navbar navbar-expand navbar-light bg-light bg-gradient border-top">
  <div class="container-fluid">
    <div class="ms-auto">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <small><a class="nav-link" href="https://techfolios.github.io">Made with Techfolios</a></small>
      </ul>
    </div>
  </div>
</footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  </body>
</html>
